<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkedIn Post Generator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e5e7eb;
            color: #1f2937;
        }
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem 2rem;
            border-radius: 9999px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
            opacity: 0;
            visibility: hidden;
            z-index: 1000;
        }
        .message-box.show {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <!-- Message Box -->
    <div id="messageBox" class="message-box text-center text-sm font-semibold"></div>

    <div class="max-w-4xl mx-auto bg-white p-6 sm:p-10 rounded-3xl shadow-2xl">
        <h1 class="text-3xl sm:text-4xl font-bold text-center mb-6 text-gray-800">
            Create Your LinkedIn Post
        </h1>
        <p class="text-center text-gray-600 mb-8">
            Describe your image, and our AI will generate a professional post for you to review and approve.
        </p>

        <!-- Input Section -->
        <div class="space-y-6">
            <div>
                <label for="description" class="block text-gray-700 font-medium mb-2">Text Description:</label>
                <textarea id="description" rows="4" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200" placeholder="e.g., A photo of a new product launch event with the team. (Optional if an image is provided)"></textarea>
            </div>
            <div>
                <label for="imageUpload" class="block text-gray-700 font-medium mb-2">Upload Image:</label>
                <input type="file" id="imageUpload" accept="image/*" class="w-full p-3 border border-gray-300 rounded-xl bg-gray-50 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 transition-colors duration-200">
            </div>
            
            <div>
                <label for="systemPrompt" class="block text-gray-700 font-medium mb-2">Custom AI Prompt (Optional):</label>
                <textarea id="systemPrompt" rows="4" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200" placeholder="e.g., You are a witty content creator. Generate a post that is funny and engaging."></textarea>
            </div>

            <button id="generateBtn" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-blue-700 transition-colors duration-300">
                Generate Post
            </button>
        </div>

        <!-- Post Preview and Action Section -->
        <div id="postReviewSection" class="mt-10 hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Post Preview:</h2>
            <div id="imagePreview" class="mb-4"></div>
            <div id="postOutput" class="min-h-[150px] p-5 bg-gray-50 border border-gray-200 rounded-xl overflow-auto text-gray-800 whitespace-pre-wrap"></div>
            
            <button id="postBtn" class="mt-6 w-full bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-green-700 transition-colors duration-300">
                Post to LinkedIn
            </button>
        </div>
    </div>

    <script>
        const descriptionInput = document.getElementById('description');
        const imageUploadInput = document.getElementById('imageUpload');
        const generateBtn = document.getElementById('generateBtn');
        const postReviewSection = document.getElementById('postReviewSection');
        const postOutput = document.getElementById('postOutput');
        const postBtn = document.getElementById('postBtn');
        const messageBox = document.getElementById('messageBox');
        const systemPromptInput = document.getElementById('systemPrompt');
        const imagePreview = document.getElementById('imagePreview');
        
        // This is a placeholder. Replace with your actual make.com webhook URL.
        const MAKE_WEBHOOK_URL = "https://hook.eu2.make.com/ocm6sjbqa08taivdar9jecvgvf8assr3";

        // This is a placeholder. Do not provide real API keys to end users.
        const GEMINI_API_KEY = "AIzaSyBzarTjyUPuP69sFbWmvhZjq_Z9qlJsmvo";
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${GEMINI_API_KEY}`;

        function showMessage(message, type = 'info') {
            messageBox.textContent = message;
            messageBox.classList.remove('bg-green-500', 'bg-red-500', 'bg-blue-500');
            if (type === 'success') {
                messageBox.classList.add('bg-green-500', 'text-white');
            } else if (type === 'error') {
                messageBox.classList.add('bg-red-500', 'text-white');
            } else {
                messageBox.classList.add('bg-blue-500', 'text-white');
            }
            messageBox.classList.add('show');
            setTimeout(() => {
                messageBox.classList.remove('show');
            }, 3000);
        }

        const fileToBase64 = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = (error) => reject(error);
                reader.readAsDataURL(file);
            });
        };

        generateBtn.addEventListener('click', async () => {
            const description = descriptionInput.value;
            const file = imageUploadInput.files[0];
            const customSystemPrompt = systemPromptInput.value;

            if (!description && !file) {
                showMessage("Please provide either a text description or an image.", "error");
                return;
            }

            showMessage("Generating post...", "info");
            generateBtn.disabled = true;
            postReviewSection.classList.add('hidden');
            postOutput.innerText = '';
            
            try {
                let systemPrompt = `# **Role:** You are a world-class LinkedIn Content Strategist, Digital Psychologist, and Professional Storytelling Expert with over 100 years of cumulative industry experience.  
Your specialty is creating highly structured, data-driven, psychologically compelling, and algorithm-optimized LinkedIn posts that deliver measurable engagement, follower growth, and authority positioning.

# **Objective:** Create a viral, actionable, emotionally engaging, and authentic LinkedIn post that aligns with the â€œLatin Proâ€ style formula.  
The post must establish credibility, provoke meaningful interaction, provide high-value takeaways, and be designed for maximal readability and shareability.

# **Context:** The target audience consists of ambitious professionals, young entrepreneurs, mid-career leaders, and personal development seekers who are hungry for real, applicable advice, growth hacks, and unique insights.  
The user wants to position themselves as an authority in their domain while driving high engagement and valuable connections.

# **Instructions:** ## "Instruction 1 â€“ Craft an Irresistible Hook"  
ðŸ‘‰ Begin with a bold, shocking, or counterintuitive statement, or a powerful statistic that challenges conventional thinking.  
ðŸ§± It must be one sentence, designed to capture attention in the first 3 seconds of scrolling.

## "Instruction 2 â€“ Share a Micro-Personal Insight or Observational Story"  
ðŸ“– Write 2â€“4 sentences presenting a personal challenge, struggle, or direct observation that emotionally connects with the audience.  
ðŸŽ¯ Tone: Authentic, vulnerable, non-salesy, relatable, and human.

## "Instruction 3 â€“ Myth-Busting Insight"  
âš¡ Select a widely believed but incorrect assumption related to the topic.  
ðŸ”§ Deliver a clear contradiction backed by your experience or research insight.

## "Instruction 4 â€“ Present an Actionable Framework or 3-Step Strategy"  
âœ… Create a crisp, numbered 3-step strategy that provides real value.  
ðŸ’¡ Use emojis (âœ…, ðŸš€, ðŸ’¡) to highlight each step and enhance readability.  
ðŸ“Š Each step should be actionable, concise (max 20 words), and practical.

## "Instruction 5 â€“ Deliver a Powerful Takeaway Insight"  
âœ¨ Craft a single, memorable sentence that conveys a deep insight or core truth related to the topic.  
âš¡ Example style: â€œClarity beats effort every time.â€

## "Instruction 6 â€“ Write a Thought-Provoking Engagement Question"  
â“ End the post with an open-ended question designed to provoke reflection, personal sharing, or debate.  
ðŸ§  Make it highly relevant, stimulating, and easy to respond to.

## "Instruction 7 â€“ Include Hashtags and Visual Guidance"  
ðŸ“Œ Add 3â€“5 carefully selected high-impact hashtags (e.g., #Leadership #GrowthMindset #CareerTips).  
ðŸ–¼ï¸ Add a note: â€œConsider attaching a branded image summarizing the framework or key insight.â€

## "Instruction 8 â€“ Formatting Rules"  
ðŸ“ Use generous line breaks for clarity and visual appeal.  
ðŸš€ Limit total word count to 150â€“200 words.  
âœ… Apply minimal but meaningful emojis.  
ðŸ“ Avoid large paragraphsâ€”keep sentences short and scannable.  
ðŸ“š Bold the first hook line.

# **Notes & Best Practices:** ðŸ”§ Avoid vague generalities or clichÃ© advice.  
ðŸ§± Provide specific, actionable, original insights.  
ðŸ—£ï¸ Use direct, conversational tone, but stay professional.  
ðŸ“Š Base recommendations on real-world experience, data, or psychological principles.  
âš ï¸ Do NOT be promotional, sales-focused, or generic.  
ðŸ“ˆ The primary goal is authentic authority-building + engagement.
NOTE: i just need the linked in post. no other extras. dont write like here's your linked in profile anol. just the post and no extra suggestions

---

# **Example Topic Input:** "How to overcome imposter syndrome as a professional"

---

# **Expected Output:** A fully structured LinkedIn post in Markdown format following the "Latin Pro" style, including:  
- A bold hook  
- Micro-story or insight  
- Myth-busting perspective  
- 3 actionable steps  
- A powerful takeaway sentence  
- An engagement question  
- Proper hashtags and formatting ready for direct posting.
`;
                
                // Use the custom prompt if provided, otherwise use the default
                if (customSystemPrompt.trim() !== '') {
                    systemPrompt = customSystemPrompt;
                }
                
                let userPromptParts = [];
                if (description) {
                    userPromptParts.push({ text: `Based on the following text, create a LinkedIn post:\n\nText: ${description}` });
                }
                
                if (file) {
                    const base64Image = await fileToBase64(file);
                    userPromptParts.push({ inlineData: { mimeType: file.type, data: base64Image } });
                }

                const payload = {
                    contents: [{
                        role: 'user',
                        parts: userPromptParts
                    }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content?.parts) {
                    const generatedText = result.candidates[0].content.parts[0].text;
                    
                    // Construct the final output string to display
                    const finalPost = `Here is your LinkedIn post, crafted in the "Latin Pro" style:\n\n${generatedText}`;

                    postOutput.innerText = finalPost;
                    postReviewSection.classList.remove('hidden');
                    showMessage("Post generated successfully!", "success");

                    // Display the uploaded image for preview
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            imagePreview.innerHTML = `<img src="${e.target.result}" alt="Uploaded image preview" class="rounded-xl shadow-md w-full max-w-lg mx-auto">`;
                        };
                        reader.readAsDataURL(file);
                    } else {
                        imagePreview.innerHTML = '';
                    }

                } else {
                    throw new Error('Could not generate content. Please try again.');
                }
            } catch (error) {
                console.error('API Error:', error);
                showMessage(`An error occurred: ${error.message}`, "error");
            } finally {
                generateBtn.disabled = false;
            }
        });

        postBtn.addEventListener('click', async () => {
            const finalPostText = postOutput.innerText;
            const file = imageUploadInput.files[0];

            if (!finalPostText) {
                showMessage("Post content is missing.", "error");
                return;
            }

            showMessage("Sending to make.com...", "info");
            postBtn.disabled = true;
            
            // Clean up the text before sending to make.com
            const lines = finalPostText.split('\n');
            const startIndex = lines.findIndex(line => line.includes("Here is your LinkedIn post, crafted in the \"Latin Pro\" style:"));
            const endIndex = lines.findIndex(line => line.includes("Consider attaching a branded image summarizing the framework or key insight."));

            const postToSend = lines.slice(startIndex + 1, endIndex).join('\n').trim();

            try {
                const payload = { postText: postToSend };

                // Conditionally add image data if a file is present
                if (file) {
                    const base64Image = await fileToBase64(file);
                    payload.imageName = file.name;
                    payload.imageType = file.type;
                    payload.imageData = base64Image;
                }

                const response = await fetch(MAKE_WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    showMessage("Post successfully sent to make.com for publishing!", "success");
                } else {
                    throw new Error('Failed to send data to make.com webhook. Check the URL and Make scenario.');
                }
            } catch (error) {
                console.error('Webhook Error:', error);
                showMessage(`An error occurred: ${error.message}`, "error");
            } finally {
                postBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
